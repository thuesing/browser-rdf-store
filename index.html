<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
  xmlns:xsd="http://www.w3.org/2001/XMLSchema#"
  xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
  xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
  xmlns:dc="http://purl.org/dc/elements/1.1/"
  xmlns:dcterms="http://purl.org/dc/terms/"
  xmlns:foaf="http://xmlns.com/foaf/0.1/"
  xmlns:vcard="http://www.w3.org/2006/vcard/ns#"
  xmlns:biografr="http://biografr.com/ontology#">
  <head>
    <meta http-equiv="content-type" content="text/html;charset=utf-8" />
    <title>RDF Query Test</title>
    <script type="text/javascript" src="./dist/js/jquery.min.js"></script>
    <script type="text/javascript" src="./dist/js/jquery.rdfquery.core-1.0.js"></script>
    <script type="text/javascript" src="./dist/js/jquery.rdfquery.rules-1.0.js"></script>
    <script src="./dist/js/jquery.format.js"></script>
  </head>
  <body>

<!-- 
RDF query  https://code.google.com/p/rdfquery/wiki/RdfPlugin
minified by http://zachofalltrades.github.io/jquery.format/demo/index.html
-->
<!-- test string minified -->
<script type="text/xml" id="data-test"><?xml version="1.0" encoding="utf-8" ?><rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns:tbx="http://beta.liaise-toolbox.eu/" xmlns:sioc="http://rdfs.org/sioc/ns#" xmlns:dc="http://purl.org/dc/terms/" xmlns:foaf="http://xmlns.com/foaf/0.1/"><tbx:model rdf:about="http://beta.liaise-toolbox.eu/e3me"><rdf:type rdf:resource="http://xmlns.com/foaf/0.1/Document"/><sioc:has_creator rdf:resource="tbx:user/443"/><dc:title>E3ME</dc:title></tbx:model></rdf:RDF></script>


  <script type='text/javascript'>
    jQuery(document).ready(function(){ 

   // load from script div   Ok
   // but needs minification   
  //loadRdfFromDiv('#data-test') ;


  loadRdfFromFile('models.rdf');

  function loadRdfFromFile(loadUrl, el) {

      // Assign handlers immediately after making the request,
      // and remember the jqxhr object for this request
      var jqxhr = $.get(loadUrl, function() {
         console.log("Success");
      }, 'xml')
      .done(function(data) { 

         var rdf = $.rdf().load(data, {});
         //console.log(data);
         console.log(JSON.stringify(rdf.databank.dump()));

      })
      .fail(function() { alert("error"); })
      .always(function() {});

  }


  function loadRdfFromDiv(el) { 
    // xml needs minification or throws error
    $(el).format({method: 'xmlmin'});

    string_data = $(el).html();
     // TODO IE
     parser = new DOMParser();
     data = parser.parseFromString( string_data, "text/xml" );
     var rdf = $.rdf().load(data, {});
     //console.log(data);
     console.log(JSON.stringify(rdf.databank.dump()));
     
  } 
    
});
</script>
</script>
    <div id="content">
    </div>
</body>
</html>